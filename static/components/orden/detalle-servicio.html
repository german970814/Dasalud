<link rel="import" href="/static/bower_components/polymer/polymer-element.html">
<link rel="import" href="/static/bower_components/vaadin-grid/vaadin-grid.html">
<link rel="import" href="/static/bower_components/paper-button/paper-button.html">
<link rel="import" href="/static/bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="/static/bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="/static/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/static/bower_components/vaadin-date-picker/vaadin-date-picker.html">
<link rel="import" href="/static/bower_components/paper-time-input/paper-time-input.html">
<link rel="import" href="/static/bower_components/paper-input/paper-input.html">
<link rel="import" href="/static/components/vaadin-grid-material-styles.html">

<dom-module id="detalle-servicio">
    <template>
        <style include="vaadin-grid-material-styles">
            :host {
                display: block
            }
        </style>

        <paper-checkbox checked="{{editing}}">Editar</paper-checkbox>

        <vaadin-grid items="[[sesiones]]">
            <vaadin-grid-column>
                <template class="header">
                    <div class="cell first">Fecha</div>
                </template>
                <template>
                    <div class="cell first">
                        <!-- <span hidden$="[[!editing]]">
                            <input type="date" value="{{item.fecha::input}}">
                        </span> -->
                        <span>[[item.fecha]]</span>
                    </div>
                </template>
            </vaadin-grid-column>
            <vaadin-grid-column>
                <template class="header">
                    <div class="cell">Hora</div>
                </template>
                <template>
                    <div class="cell">
                        <!-- <span hidden$="[[!editing]]">
                            <input type="time" value="{{item.hora::input}}">
                        </span> -->
                        <span>[[item.hora]]</span>
                    </div>
                </template>
            </vaadin-grid-column>
            <vaadin-grid-column>
                <template class="header">
                    <div class="cell">Estado</div>
                </template>
                <template>
                    <div class="cell">[[item.estado]]</div>
                </template>
            </vaadin-grid-column>
            <vaadin-grid-column>
                <template class="header">
                    <div class="cell">Autorización</div>
                </template>
                <template>
                    <div class="cell">
                        <span hidden$="[[!editing]]">
                            <input type="text" value="{{item.autorizacion::input}}">
                        </span>
                        <span hidden$="[[editing]]">[[item.autorizacion]]</span>
                    </div>
                </template>
            </vaadin-grid-column>
            <vaadin-grid-column>
                <template class="header">
                    <div class="cell">Fecha de autorización</div>
                </template>
                <template>
                    <div class="cell">
                        <span hidden$="[[!editing]]">
                            <input type="date" value="{{item.fecha_autorizacion::input}}">
                        </span>
                        <span hidden$="[[editing]]">[[item.fecha_autorizacion]]</span>
                    </div>
                </template>
            </vaadin-grid-column>
            <vaadin-grid-column>
                <template class="header">
                    <div class="cell">Sucursal</div>
                </template>
                <template>
                    <div class="cell">[[item.sucursal.node.nombre]]</div>
                </template>
            </vaadin-grid-column>
            <vaadin-grid-column flex-grow="0">
                <template class="header">
                    <div class="cell last"></div>
                </template>
                <template>
                    <div class="cell last">
                        <paper-icon-button icon="my-icons:today" on-tap="_agendarCita"></paper-icon-button>
                    </div>
                </template>
            </vaadin-grid-column>
        </vaadin-grid>
    </template>

    <script>
        class DetalleServicio extends Polymer.Element {

            static get is() { return 'detalle-servicio'; }

            static get properties() {
                return {
                    sesiones: {
                        type: Array
                    },
                    editing: {
                        type: Boolean,
                        value: false
                    }                    
                };
            }

            constructor() {
                super();
            }

            ready() {
                super.ready();

                Polymer.RenderStatus.afterNextRender(this, function() {
                    
                });
            }

            _agendarCita(e) {
                console.log(e);
                this.dispatchEvent(new CustomEvent('open-calendar', {detail: e.model}));
            }
        }

        window.customElements.define(DetalleServicio.is, DetalleServicio);
    </script>
</dom-module>